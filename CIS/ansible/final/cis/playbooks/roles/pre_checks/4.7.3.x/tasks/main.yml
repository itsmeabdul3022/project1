    - name: Create pre_checks directory on Ansible host
      ansible.builtin.file:
        path: "/tmp/pre_checks"
        state: directory
        mode: '0755'
      delegate_to: localhost
      run_once: yes

    - name: Read the content of the sshd_config file
      ansible.builtin.slurp:
        src: /etc/ssh/sshd_config
      register: sshd_config_content
      when: ansible_os_family == 'AIX'
      ignore_errors: yes

    - name: Copy the file on the remote host
      ansible.builtin.copy:
        src: /etc/ssh/sshd_config
        dest: "/etc/ssh/sshd_config_{{ ansible_date_time.date }}_{{ ansible_date_time.hour }}{{ ansible_date_time.minute }}"
        remote_src: yes

    - name: Write the file content to a file on the Ansible host
      ansible.builtin.copy:
        content: "{{ sshd_config_content.content | b64decode }}"
        dest: "/tmp/pre_checks/4.7.3.x_pre_checks.sshd_config.{{ inventory_hostname }}.txt"
      delegate_to: localhost
      when: sshd_config_content.content is defined
